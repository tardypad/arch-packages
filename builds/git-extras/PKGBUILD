pkgname=git-extras
pkgver=4.5.0
pkgrel=2
pkgdesc="GIT utilities -- repo summary, commit counting, repl, changelog population and more"
arch=('any')
url="https://github.com/tj/${pkgname}"
license=('MIT')

depends=(
  'bash'
  'git'
)

source=(
  "${pkgname}-${pkgver}.tar.gz::${url}/archive/${pkgver}.tar.gz"
)

sha512sums=(
  'b63d2f10b48dde9efd673015fdd39975a0e0fd355c07e33d623beaa9c9cffb36116f566a295b0af7e0cd26cad9a572f8b58d6a1f6fb22be40bee727e133ba961'
)

package() {
  cd "$srcdir/$pkgname-$pkgver"
  make DESTDIR="$pkgdir" PREFIX=/usr SYSCONFDIR=/etc install
  install -Dm644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"

  # move bash completion to standard folder
  rm -rf "$pkgdir/etc/bash_completion.d"
  install -Dm0644 "etc/bash_completion.sh" "$pkgdir/usr/share/bash-completion/completions/git-extras"

  install -Dm0644 "etc/git-extras-completion.zsh" "$pkgdir/usr/share/zsh/site-functions/git-extras-completion.zsh"
}
